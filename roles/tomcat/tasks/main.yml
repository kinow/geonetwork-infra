# move this to a common task
# - name: set data directory environment variable in etc environment
  # lineinfile: dest=/etc/environment state=present regexp='^geonetwork_dir' line='geonetwork_dir={{ geonetwork_data_dir }}'

- name: installing dependencies
  apt: pkg={{ item }} state=installed update_cache=yes
  with_items:
  - tomcat8
  - tomcat8-admin

- file: 
    path: "/var/lib/tomcat8/"
    owner: tomcat8
    group: tomcat8
    state: directory
    mode: 0755
    recurse: yes
  notify: restart tomcat

- name: create setenv.sh
  copy:
    dest: "/usr/share/tomcat8/bin/setenv.sh"
    content: 'CATALINA_OPTS="-Xms1046M -Xmx1046M"'
    force: yes
    owner: tomcat8
    group: tomcat8
    mode: 0755
  notify: restart tomcat

# - name: create setenv.sh
#   copy:
#     dest: "/usr/share/tomcat8/bin/setenv.sh"
#     content: 'CATALINA_OPTS="-Dgeonetwork.dir={{ geonetwork_data_dir }}"'
#     force: yes
#     owner: tomcat8
#     group: tomcat8
#     mode: 0755
#   notify: restart tomcat

